<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Rock Paper Scissors</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="rockpaperscissors.css" />
    <!-- <script src="./rockpaperscissors.js"></script> -->
</head>
<body>
    <header>
        <h1 class="text-center">Rock Paper Scissors</h1>
       <h2 class="text-center heading game">Game <span id="game">1</span></h2>
       <div class="text-center container content">
            <div class="text-center flex33">Wins: <span id="win">0</span></div>
            <div class="text-center flex33">Ties: <span id="tie">0</span></div>
            <div class="text-center flex33">Losses: <span id="loss">0</span></div>
       </div>
    </header>
    <main>
        <div class="content selection text-center" id="computer">The Computer Hasn't picked yet</div>
        <div class="content selection text-center" id="user">You haven't picked yet</div>
        <div class="content selection text-center" id="outcome"></div>
        <div class="buttonContainer container content">
            <button class="choice rock flex33" value="1">Rock</button>
            <button class="choice paper flex33"  value="2">Paper</button>
            <button class="choice scissors flex33"  value="3">Scissors</button>
        </div>
    </main>
    <script>
       
        document.querySelector("button.rock").addEventListener("click", startNewGame);
        document.querySelector("button.paper").addEventListener("click", startNewGame);
        document.querySelector("button.scissors").addEventListener("click", startNewGame);
        
        // 1 = rock, 2 = paper, 3 = scissors
        const validChoices = { 1: "rock", 2: "paper", 3: "scissors" };

        // Caching the users selection
        let usersAnswer = 0;

        // Caching the computers selection
        let computersAnswer = 0;

        // Count wins and cache the results
        let wins = 0;

        // Count loses and cache the results
        let losses = 0;

        // Count ties and cache the results
        let ties = 0;

        let games = 1;

        function startNewGame(event) {
            usersAnswer= parseInt(event.target.value);
            document.querySelector("#user").innerHTML = "You chose " + validChoices[usersAnswer];

            computersAnswer = Math.floor(Math.random() * (4 - 1) + 1);
            document.querySelector("#computer").innerHTML = "The computer chose " + validChoices[computersAnswer];

            pickWinner();
            gameOver();
        }
        
        function gameOver(){
            games++;
            document.querySelector("#game").innerHTML = games;
        }
        
        function pickWinner() {
            const outcomeEl = document.querySelector("#outcome");
            if (computersAnswer == 1 && usersAnswer == 1 ) {
                outcomeEl.innerHTML = "It's tie. You both chose rock.";
                ties++;
                document.querySelector("#tie").innerHTML = ties;
            }

            if (computersAnswer == 1 && usersAnswer == 2 ) {
                outcomeEl.innerHTML = "You win. Paper covers rock.";
                wins++;
                document.querySelector("#win").innerHTML = wins;
            }

            if (computersAnswer === 1 && usersAnswer === 3) {
                outcomeEl.innerHTML = "You lose. Rock crushes scissors.";
                losses++;
                document.querySelector("#loss").innerHTML = losses;
            }

            if (computersAnswer === 2 && usersAnswer === 1) {
                outcomeEl.innerHTML = "You lose. Paper covers rock.";
                losses++;
                document.querySelector("#loss").innerHTML = losses;
            }

            if (computersAnswer === 2 && usersAnswer === 2) {
                outcomeEl.innerHTML = "It's a tie. You both chose paper.";
                ties++;
                document.querySelector("#tie").innerHTML = ties;
            }

            if (computersAnswer === 2 && usersAnswer === 3) {
                outcomeEl.innerHTML = "You win. Scissors cuts paper";
                wins++;
                document.querySelector("#win").innerHTML = wins;
            }

            if (computersAnswer === 3 && usersAnswer === 1) {
                outcomeEl.innerHTML = "You win. Rock crushes scissors.";
                wins++;
                document.querySelector("#win").innerHTML = wins;
            }
        
            if (computersAnswer === 3 && usersAnswer === 2) {
                outcomeEl.innerHTML = "You lose. Scissors cuts paper.";
                losses++;
                document.querySelector("#loss").innerHTML = losses;
            }

            if (computersAnswer === 3 && usersAnswer === 3) {
                outcomeEl.innerHTML = "It's a tie";
                ties++;
                document.querySelector("#tie").innerHTML = ties;
            }
        }
    </script>
</body>
</html>